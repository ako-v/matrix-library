{"version":3,"file":"use-toast.es.js","sources":["../src/components/toast/use-toast.ts"],"sourcesContent":["import React from \"react\";\r\n\r\nimport { ToastVariant } from \"./toast-components\";\r\n\r\nconst toastParams = {\r\n  limit: 3,\r\n};\r\n\r\ntype ToastInfo = {\r\n  message: string;\r\n  variant: ToastVariant;\r\n};\r\n\r\nconst toasts = new Map<string, ToastInfo>();\r\nconst listener: { setState: React.Dispatch<React.SetStateAction<Map<string, ToastInfo>>> } = { setState: () => {} };\r\n\r\nconst addToast = (toast: ToastInfo) => {\r\n  if (toasts.size >= toastParams.limit) {\r\n    toasts.delete(toasts.keys().next().value!);\r\n  }\r\n  toasts.set(String(Date.now()), toast);\r\n\r\n  listener.setState(new Map(toasts));\r\n\r\n  return toasts;\r\n};\r\n\r\nconst removeToast = (id: string) => {\r\n  toasts.delete(id);\r\n  listener.setState(new Map(toasts));\r\n};\r\n\r\ntype ToastFunction = {\r\n  (message: string): void;\r\n  success: (message: string) => void;\r\n  danger: (message: string) => void;\r\n  warning: (message: string) => void;\r\n  info: (message: string) => void;\r\n};\r\n\r\nconst toast: ToastFunction = (message: string) => addToast({ message, variant: \"default\" });\r\ntoast.success = (message: string) => addToast({ message, variant: \"success\" });\r\ntoast.danger = (message: string) => addToast({ message, variant: \"danger\" });\r\ntoast.warning = (message: string) => addToast({ message, variant: \"warning\" });\r\ntoast.info = (message: string) => addToast({ message, variant: \"info\" });\r\n\r\nconst useToasts = () => {\r\n  const [state, setState] = React.useState(toasts);\r\n\r\n  React.useEffect(() => {\r\n    listener.setState = setState;\r\n    return () => {\r\n      listener.setState = () => {};\r\n    };\r\n  }, [state]);\r\n\r\n  return { toast, toasts: state, addToast, removeToast };\r\n};\r\n\r\nexport { toast, useToasts, toastParams };\r\n"],"names":["toastParams","toasts","listener","addToast","toast","removeToast","id","message","useToasts","state","setState","React"],"mappings":";AAIA,MAAMA,IAAc;AAAA,EAClB,OAAO;AACT,GAOMC,wBAAa,IAAuB,GACpCC,IAAuF,EAAE,UAAU,MAAM;AAAC,EAAE,GAE5GC,IAAW,CAACC,OACZH,EAAO,QAAQD,EAAY,SAC7BC,EAAO,OAAOA,EAAO,KAAA,EAAO,OAAO,KAAM,GAE3CA,EAAO,IAAI,OAAO,KAAK,IAAI,CAAC,GAAGG,CAAK,GAEpCF,EAAS,SAAS,IAAI,IAAID,CAAM,CAAC,GAE1BA,IAGHI,IAAc,CAACC,MAAe;AAClC,EAAAL,EAAO,OAAOK,CAAE,GAChBJ,EAAS,SAAS,IAAI,IAAID,CAAM,CAAC;AACnC,GAUMG,IAAuB,CAACG,MAAoBJ,EAAS,EAAE,SAAAI,GAAS,SAAS,UAAW,CAAA;AAC1FH,EAAM,UAAU,CAACG,MAAoBJ,EAAS,EAAE,SAAAI,GAAS,SAAS,WAAW;AAC7EH,EAAM,SAAS,CAACG,MAAoBJ,EAAS,EAAE,SAAAI,GAAS,SAAS,UAAU;AAC3EH,EAAM,UAAU,CAACG,MAAoBJ,EAAS,EAAE,SAAAI,GAAS,SAAS,WAAW;AAC7EH,EAAM,OAAO,CAACG,MAAoBJ,EAAS,EAAE,SAAAI,GAAS,SAAS,QAAQ;AAEvE,MAAMC,IAAY,MAAM;AACtB,QAAM,CAACC,GAAOC,CAAQ,IAAIC,EAAM,SAASV,CAAM;AAE/CU,SAAAA,EAAM,UAAU,OACdT,EAAS,WAAWQ,GACb,MAAM;AACX,IAAAR,EAAS,WAAW,MAAM;AAAA,IAAC;AAAA,EAC7B,IACC,CAACO,CAAK,CAAC,GAEH,EAAE,OAAAL,GAAO,QAAQK,GAAO,UAAAN,GAAU,aAAAE,EAAY;AACvD;"}