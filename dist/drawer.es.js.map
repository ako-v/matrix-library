{"version":3,"file":"drawer.es.js","sources":["../src/components/drawer/Drawer.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { Slot } from \"@radix-ui/react-slot\";\r\nimport defaultTheme from \"tailwindcss/defaultTheme\";\r\nimport { createContextScope, Scope } from \"@radix-ui/react-context\";\r\n\r\nimport { cn } from \"../../lib/utils\";\r\nimport { Modal } from \"../modal/Modal\";\r\nimport { IconButton } from \"../icon-botton/IconButton\";\r\nimport { ChevronsRightIcon } from \"../Icons/ChevronsRightIcon\";\r\n\r\ntype ScopedProps<P> = P & { __scopeDrawer?: Scope };\r\n\r\nconst DRAWER_NAME = \"Drawer\";\r\n\r\nconst [createDrawerContext] = createContextScope(DRAWER_NAME);\r\n\r\ninterface DrawerProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  open: boolean;\r\n  onClose?: () => void;\r\n  anchor?: \"left\" | \"right\";\r\n  width?: number;\r\n  children?: React.ReactNode;\r\n  asChild?: boolean;\r\n  mobileBreakpoint?: number;\r\n}\r\n\r\ntype DrawerContextValue = {\r\n  open: boolean;\r\n  onClose?: () => void;\r\n  anchor: \"left\" | \"right\";\r\n  width: number;\r\n  isMobile: boolean;\r\n};\r\n\r\nconst [DrawerProvider, useDrawerProvider] = createDrawerContext<DrawerContextValue>(DRAWER_NAME);\r\n\r\n/**\r\n * Drawer component\r\n * This is the wrapper component for Drawer content and main components\r\n * @param {React.HTMLAttributes<HTMLDivElement>} props\r\n * @param {boolean} open - Drawer open state\r\n * @param {() => void} onClose - Drawer close handler\r\n * @param {\"left\" | \"right\"} anchor - Drawer anchor position\r\n * @param {number} width - Drawer width\r\n * @param {React.ReactNode} children - Drawer children\r\n * @param {boolean} asChild - Render as child component\r\n * @param {number} mobileBreakpoint - Mobile breakpoint\r\n * @returns {React.ReactElement}\r\n */\r\nconst Drawer = React.forwardRef<React.ElementRef<\"div\">, ScopedProps<DrawerProps>>((props, ref) => {\r\n  const { asChild, anchor = \"right\", children, open, width = 240, className, onClose, __scopeDrawer, mobileBreakpoint, ...restProps } = props;\r\n  const Comp = asChild ? Slot : \"div\";\r\n\r\n  // re render to show proper modal on resize\r\n  const [windowSize, setWindowSize] = React.useState(0);\r\n  React.useEffect(() => {\r\n    const observer = new ResizeObserver(() => {\r\n      setWindowSize(window.innerWidth);\r\n    });\r\n\r\n    observer.observe(document.documentElement);\r\n\r\n    return () => {\r\n      observer.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  const isMobile = React.useMemo(() => {\r\n    if (window !== undefined) {\r\n      if (mobileBreakpoint) {\r\n        return !window?.matchMedia?.(`(min-width: ${mobileBreakpoint})`)?.matches;\r\n      }\r\n      return !window?.matchMedia?.(`(min-width: ${defaultTheme.screens.md})`)?.matches;\r\n    }\r\n    return false;\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [mobileBreakpoint, windowSize]);\r\n\r\n  return (\r\n    <Comp ref={ref} className={cn(\"flex\", className)} {...restProps}>\r\n      <DrawerProvider anchor={anchor} onClose={onClose} open={open} width={width} isMobile={isMobile} scope={__scopeDrawer}>\r\n        {children}\r\n      </DrawerProvider>\r\n    </Comp>\r\n  );\r\n});\r\n\r\nDrawer.displayName = DRAWER_NAME;\r\n\r\ninterface DrawerMainProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  asChild: boolean;\r\n}\r\n\r\nconst DRAWER_MAIN_NAME = \"DrawerMain\";\r\n\r\n/**\r\n * DrawerMain component\r\n * This is the main container for the tree that should be shown always\r\n * @param {React.HTMLAttributes<HTMLDivElement>} props\r\n * @param {boolean} asChild - Render as child component\r\n * @property {React.ReactNode} children - DrawerMain children\r\n * @property {string} className - DrawerMain class name\r\n * @property {React.CSSProperties} style - DrawerMain style\r\n * @property {ScopedProps<DrawerMainProps>} __scopeDrawer - DrawerMain scope\r\n * @property {React.Ref<HTMLDivElement>} ref - DrawerMain ref\r\n * @property {React.HTMLAttributes<HTMLDivElement>} props - DrawerMain props\r\n * @returns {React.ReactElement}\r\n */\r\nconst DrawerMain = React.forwardRef<HTMLDivElement, ScopedProps<DrawerMainProps>>(\r\n  ({ asChild, children, className, style, __scopeDrawer, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"div\";\r\n    const { anchor, open, width, isMobile } = useDrawerProvider(DRAWER_MAIN_NAME, __scopeDrawer);\r\n\r\n    const marginStyle = React.useMemo(() => {\r\n      if (isMobile) {\r\n        return {};\r\n      }\r\n      if (anchor === \"left\") {\r\n        return { marginInlineStart: open ? width : 0 };\r\n      } else {\r\n        return { marginInlineEnd: open ? width : 0 };\r\n      }\r\n    }, [anchor, open, width, isMobile]);\r\n\r\n    return (\r\n      <Comp ref={ref} className={cn(\"flex-grow overflow-hidden\", className)} style={{ ...style, ...marginStyle }} {...props}>\r\n        {children}\r\n      </Comp>\r\n    );\r\n  },\r\n);\r\n\r\nDrawerMain.displayName = DRAWER_MAIN_NAME;\r\n\r\ntype DrawerContentProps = {\r\n  children?: React.ReactNode;\r\n  title: React.ReactNode;\r\n};\r\n\r\nconst DRAWER_CONTENT_NAME = \"DrawerContent\";\r\n\r\n/**\r\n * DrawerContent component\r\n * This is the content container for the tree that should be shown when the drawer is open\r\n * @param {React.HTMLAttributes<HTMLDivElement>} props\r\n * @param {React.ReactNode} children - DrawerContent children\r\n * @param {React.ReactNode} title - DrawerContent title\r\n * @property {ScopedProps<DrawerContentProps>} __scopeDrawer - DrawerContent scope\r\n * @property {React.Ref<HTMLDivElement>} ref - DrawerContent ref\r\n * @property {React.HTMLAttributes<HTMLDivElement>} props - DrawerContent props\r\n * @returns {React.ReactElement}\r\n */\r\nconst DrawerContent = React.forwardRef<HTMLDivElement, ScopedProps<DrawerContentProps>>(({ children, title, __scopeDrawer }, ref) => {\r\n  const { anchor, open, width, onClose, isMobile } = useDrawerProvider(DRAWER_CONTENT_NAME, __scopeDrawer);\r\n\r\n  return (\r\n    <>\r\n      {isMobile ? (\r\n        <Modal title={title} open={open} onOpenChange={onClose} ref={ref} fullScreen>\r\n          {children}\r\n        </Modal>\r\n      ) : (\r\n        <div className={cn(\"hidden md:block overflow-hidden\")} style={{ width }} ref={ref}>\r\n          <div\r\n            className={cn(\r\n              \"overflow-y-auto flex flex-col h-full top-0 z-[120] bg-background transition-all border-gray-200\",\r\n              open ? \"\" : anchor === \"left\" ? \"-translate-x-full rtl:translate-x-full invisible\" : \"translate-x-full rtl:-translate-x-full invisible\",\r\n              anchor === \"left\" ? \"border-r\" : \"border-l\",\r\n            )}\r\n          >\r\n            <div\r\n              className={cn(\r\n                \"h-9 flex items-center gap-2 p-2 bg-background w-full sticky top-0 border-b border-gray-200\",\r\n                anchor === \"right\" ? \"justify-start rtl:justify-end\" : \"justify-end rtl:justify-start\",\r\n              )}\r\n            >\r\n              <IconButton onClick={onClose} className=\"w-5 h-5 p-0\">\r\n                <ChevronsRightIcon className={cn(\"w-5 h-5\", anchor === \"right\" ? \"rtl:-scale-100\" : \"-scale-100 rtl:scale-100\")} />\r\n              </IconButton>\r\n              {typeof title === \"string\" || typeof title === \"number\" ? <h2 className=\"text-lg font-bold text-text\">{title}</h2> : title}\r\n            </div>\r\n            {children}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n});\r\n\r\nDrawerContent.displayName = DRAWER_CONTENT_NAME;\r\n\r\nconst Root = Drawer;\r\nconst Main = DrawerMain;\r\nconst Content = DrawerContent;\r\n\r\nexport { Drawer, DrawerMain, DrawerContent, Root, Main, Content };\r\nexport type { DrawerContentProps, DrawerMainProps, DrawerProps };\r\n"],"names":["DRAWER_NAME","createDrawerContext","createContextScope","DrawerProvider","useDrawerProvider","Drawer","React","props","ref","asChild","anchor","children","open","width","className","onClose","__scopeDrawer","mobileBreakpoint","restProps","Comp","Slot","windowSize","setWindowSize","observer","isMobile","defaultTheme","jsx","cn","DRAWER_MAIN_NAME","DrawerMain","style","marginStyle","DRAWER_CONTENT_NAME","DrawerContent","title","Fragment","Modal","jsxs","IconButton","ChevronsRightIcon"],"mappings":"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"}